pipeline {
    agent any
    environment{
        CI = 'true'
    }
    
    stages {
        stage ('Git Setup') {

        }
        stage ('Node Setup'){
            steps{
            sh '''#!/bin/bash +x
            set -o errexit

            curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh | bash
            source ~/.nvm/.nvm.sh
            nvm install 14.0.0
            npm install
            npx cypress run
            '''
            }
        }
        stage ('Install Packages'){}
        stage ('Run Cypress tests'){}
    }
}